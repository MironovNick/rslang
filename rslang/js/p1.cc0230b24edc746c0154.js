(()=>{"use strict";alert("Убедительная просьба проверить задание в четверг 24-го числа"),window.onload=()=>new class{constructor(){this.rslModel=new class{constructor(t){this.audio=new Audio,this.audioTrackNum=-1,this.serverUrl="https://react-learnwords-example-1988.herokuapp.com",this.rslController=t,this.group=0,this.page=0,this.levelRsl=-1,this.pages=[0,0,0,0,0,0,0],this.textBook=[],this.tmpWords=[],this.currWord=0,this.user={id:"",name:"",email:"",password:"",token:""},this.audio.onended=()=>this.onEndPlay(),this.audio.loop=!1}playAudio(){this.audioTrackNum=0,this.audio.src=`${this.serverUrl}/${this.textBook[this.currWord].audio}`,this.audio.play()}onEndPlay(){0===this.audioTrackNum?(this.audio.src=`${this.serverUrl}/${this.textBook[this.currWord].audioMeaning}`,this.audioTrackNum=1,this.audio.play()):1===this.audioTrackNum?(this.audio.src=`${this.serverUrl}/${this.textBook[this.currWord].audioExample}`,this.audioTrackNum=-1,this.audio.play()):this.audio.pause()}async getTmpWords(t,e){try{const s=await fetch(`${this.serverUrl}/words?group=${t}&page=${e}`,{method:"GET"});s.ok?this.tmpWords=await s.json():console.error("Ошибка:",s.status)}catch(t){console.error("Ошибка:",t)}}async createUser(t){try{const e=await fetch(`${this.serverUrl}/users`,{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})});if(e.ok){const s=await e.json();this.user.id=s.id,this.user.name="",this.user.email="",this.user.password="",await this.logInUser({email:t.email,password:t.password})}else console.error("Ошибка:",e.status)}catch(t){console.error("Ошибка:",t)}}async logInUser(t){try{const e=await fetch(`${this.serverUrl}/signin`,{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})});if(e.ok){const s=await e.json();this.user.token=s.token,this.user.id=s.userId,this.user.name=s.name,this.user.email=t.email,this.user.password=t.password}else this.user.token="",this.user.id="",console.error("Ошибка:",e.status)}catch(t){console.error("Ошибка:",t)}}async createUserWord(t,e){try{const s=await fetch(`${this.serverUrl}/users/${this.user.id}/words/${this.tmpWords[t].id}`,{method:"POST",headers:{Authorization:`Bearer ${this.user.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({difficulty:e,optional:{state:"learn",correctCnt:0,incorrectCnt:0}})});s.ok?await s.json():console.error("Ошибка:",s.status)}catch(t){console.error("Ошибка:",t)}}async updateUserWord(t){try{const e=await fetch(`${this.serverUrl}/users/${this.user.id}/words/${this.textBook[t]._id}`,{method:"PUT",headers:{Authorization:`Bearer ${this.user.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({difficulty:"learn",optional:{state:this.textBook[t].userWord.optional.state,correctCnt:this.textBook[t].userWord.optional.correctCnt,incorrectCnt:this.textBook[t].userWord.optional.incorrectCnt}})});e.ok?await e.json():console.error("Ошибка:",e.status)}catch(t){console.error("Ошибка:",t)}}async deleteUserWord(t){try{const e=await fetch(`${this.serverUrl}/users/${this.user.id}/words/${this.textBook[t]._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${this.user.token}`}});e.ok||console.error("Ошибка:",e.status)}catch(t){console.error("Ошибка:",t)}}async getUserAggregatedWords(t){try{const e=await fetch(`${this.serverUrl}/users/${this.user.id}/aggregatedWords${t}`,{method:"GET",headers:{Authorization:`Bearer ${this.user.token}`,Accept:"application/json"}});if(e.ok){const t=await e.json();t.length>0&&(this.textBook=t[0].paginatedResults)}else console.error("Ошибка:",e.status)}catch(t){console.error("Ошибка:",t)}}}(this),this.mainView=new class{constructor(t){this.rslcontroller=t,this.main=document.querySelector(".main_page"),this.loginBtn=this.main.querySelector(".log_in_button"),this.modalBody=this.main.querySelector(".modal_body"),this.logInWindow=this.main.querySelector("#log_in_window"),this.logInEmail=this.logInWindow.querySelector(".log_in_window_input_email"),this.logInPswd=this.logInWindow.querySelector(".log_in_window_input_pswd"),this.signInWindow=this.main.querySelector("#sign_in_window"),this.signInName=this.signInWindow.querySelector(".sign_in_window_input_name"),this.signInEmail=this.signInWindow.querySelector(".sign_in_window_input_email"),this.signInPswd=this.signInWindow.querySelector(".sign_in_window_input_pswd"),this.evInit=!1,this.evetsInit()}evetsInit(){if(this.evInit)return;this.evInit=!0,this.main.querySelector(".textbook_page_ref")?.addEventListener("click",(()=>{this.textBookClick()})),this.main.querySelector(".log_in_button")?.addEventListener("click",(()=>{this.logInMenuClick()})),this.main.querySelector("#modal_window_registration_button")?.addEventListener("click",(()=>{this.logInRegistrClick()})),this.main.querySelector(".modal_window_log_in_enter")?.addEventListener("click",(()=>{this.logInEnterClick()})),this.main.querySelector(".modal_window_sign_in_create")?.addEventListener("click",(()=>{this.signInCreateClick()}));const t=this.main.querySelectorAll(".modal_log_close");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{this.logCloseClick()}))}textBookClick(){this.main.style.display="none",this.rslcontroller.textBookView.textBook.style.display="block"}logInMenuClick(){this.rslcontroller.rslModel.user.id?(this.logInEmail.value="",this.logInPswd.value="",this.rslcontroller.rslModel.user.id="",this.rslcontroller.rslModel.user.token="",this.main.querySelector(".log_in_button").textContent="войти",this.rslcontroller.viewUserNameAll(),localStorage.removeItem("rslang_user")):(this.modalBody.style.visibility="visible",this.logInWindow.style.display="block",this.signInWindow.style.display="none",this.logInEmail.value=this.rslcontroller.rslModel.user.email,this.logInPswd.value=this.rslcontroller.rslModel.user.password)}logCloseClick(){this.logInWindow.style.display="none",this.signInWindow.style.display="none",this.modalBody.style.visibility="hidden",this.loginBtn.textContent="выйти",this.rslcontroller.viewUserNameAll()}logInRegistrClick(){this.logInWindow.style.display="none",this.signInWindow.style.display="block"}async logInEnterClick(){const t={email:this.logInEmail.value,password:this.logInPswd.value};t.email&&t.password&&(await this.rslcontroller.logInUser(t),this.rslcontroller.rslModel.user.id&&this.rslcontroller.rslModel.user.token&&this.logCloseClick())}async signInCreateClick(){const t={name:this.signInName.value,email:this.signInEmail.value,password:this.signInPswd.value};t.name&&t.email&&t.password&&(await this.rslcontroller.createUser(t),this.rslcontroller.rslModel.user.id&&this.rslcontroller.rslModel.user.token&&this.logCloseClick())}}(this),this.textBookView=new class{constructor(t){this.rslcontroller=t,this.textBook=document.querySelector(".textbook_page"),this.levelContent=this.textBook.querySelector(".textbook_page_content_right"),this.evInit=!1,this.evetsInit()}evetsInit(){if(this.evInit)return;this.textBook.querySelector(".main_page_ref")?.addEventListener("click",(()=>{this.mainMenuClick()})),this.textBook.querySelector(".unit_page_diff_words_ref")?.addEventListener("click",(()=>{this.hardWorsdMenuClick()})),this.evInit=!0;const t=this.textBook.querySelectorAll(".level_box");for(let e=0;e<t.length;e++)t[e].setAttribute("data-id",`${e}`),t[e].addEventListener("click",(t=>{this.levelClick(t)})),t[e].addEventListener("mouseover",(t=>{this.levelMouseOver(t)}))}levelClick(t){this.textBook.style.display="none",this.rslcontroller.tbWordsView.textBookWords.style.display="block",this.rslcontroller.tbLevelClick(t)}mainMenuClick(){this.textBook.style.display="none",this.rslcontroller.mainView.main.style.display="block"}hardWorsdMenuClick(){this.textBook.style.display="none",this.rslcontroller.tbWordsView.textBookWords.style.display="block",this.rslcontroller.hardWordsView()}levelMouseOver(t){const e=["Начальный уровень A1","Элементарный уровень A2","Средний уровень B1","Средне-продвинутый уровень B2","Продвинутый уровень C1","Владение в совершенстве C2"],s=t.currentTarget.getAttribute("data-id");s&&(this.levelContent.querySelector("div").style.backgroundImage=`url(./images/${+s+1}.jpg)`,this.levelContent.querySelector("h4").textContent=e[+s])}}(this),this.tbWordsView=new class{constructor(t){this.rslcontroller=t,this.textBookWords=document.querySelector(".unit_page"),this.evInit=!1,this.evetsInit()}evetsInit(){if(this.evInit)return;this.textBookWords.querySelector(".main_page_ref")?.addEventListener("click",(()=>{this.mainMenuClick()})),this.textBookWords.querySelector(".textbook_page_ref")?.addEventListener("click",(()=>{this.textBookClick()})),this.textBookWords.querySelector(".unit_page_diff_words_ref")?.addEventListener("click",(()=>{this.hardWorsdMenuClick()})),this.textBookWords.querySelector(".games_page_ref")?.addEventListener("click",(()=>{this.gamesClick()}));const t=this.textBookWords.querySelectorAll(".experience_level_button");for(let e=0;e<t.length;e++)t[e].setAttribute("data-id",`${e}`),t[e].addEventListener("click",(t=>{this.levelClick(t)}));this.evInit=!0,this.textBookWords.querySelector(".fa-angle-right")?.addEventListener("click",(()=>{this.rslcontroller.nextWordsPage()})),this.textBookWords.querySelector(".fa-angle-left")?.addEventListener("click",(()=>{this.rslcontroller.prevWordsPage()}))}mainMenuClick(){this.textBookWords.style.display="none",this.rslcontroller.mainView.main.style.display="block"}textBookClick(){this.textBookWords.style.display="none",this.rslcontroller.textBookView.textBook.style.display="block"}gamesClick(){this.textBookWords.style.display="none",this.rslcontroller.gamesView.games.style.display="block"}hardWorsdMenuClick(){this.rslcontroller.hardWordsView()}levelClick(t){this.rslcontroller.tbLevelClick(t)}render(t){this.removeWorsEvens();const e=this.textBookWords.querySelector(".unit_page_content");e.innerHTML="";for(let s=0;s<t.length;s++)e.appendChild(this.wordHTML(`${s}`,t[s]));const s=this.textBookWords.querySelector(".page_scroller");6===this.rslcontroller.rslModel.group?s.style.display="none":(s.style.display="flex",this.setActualPage(`${this.rslcontroller.rslModel.page+1}`)),this.addWorsEvens()}wordHTML(t,e){const s=document.createElement("div");s.className="unit_item",s.setAttribute("data-id",t);let i=`<div class="unit_item_cover" style="background-image: url(${this.rslcontroller.rslModel.serverUrl}/${e.image})"></div><div class="unit_item_icons_bar">`;const r=this.rslcontroller.isHardWord(+t)?"on":"off",o=this.rslcontroller.isEasyWord(+t)?"on":"off";return i+=this.rslcontroller.rslModel.user.token?`<i class="fas fa-star-of-life ${r}" data-id="${t}"></i>`:"",i+=this.rslcontroller.rslModel.user.token?`<i class="fas fa-thumbs-up ${o}" data-id="${t}"></i>`:"",i+=`</div><div class="unit_item_title"><h2>${e.word}</h2></div><div class="unit_item_string string1"><p>${e.wordTranslate}</p><p>${e.transcription}</p><i class="fas fa-volume-up" data-id="${t}"></i></div><div class="unit_item_string string2"><p>${e.textMeaning}</p></div><div class="unit_item_string string3"><p>${e.textExample}</p></div><div class="divide_string"></div><div class="unit_item_string string4"><p>${e.textMeaningTranslate}</p></div><div class="unit_item_string string5"><p>${e.textExampleTranslate}</p></div>`,s.innerHTML=i,s}expLevelBtnActivate(t){const e=this.textBookWords.querySelectorAll(".experience_level_button");for(let s=0;s<e.length;s++){const i=e[s].getAttribute("data-id"),r=e[s].parentElement;if(i&&r)if(t!==+i)r.className="experience_level_block";else{let t="experience_level_block_";switch(+i){case 0:t+="a1";break;case 1:t+="a2";break;case 2:t+="b1";break;case 3:t+="b2";break;case 4:t+="c1";break;case 5:t+="c2";break;default:t+="h"}t+="_active",r.className=t}}}setActualPage(t){const e=this.textBookWords.querySelector(".actual_page");e&&(e.textContent=t)}removeWorsEvens(){const t=this.textBookWords.querySelectorAll(".fa-volume-up");for(let e=0;e<t.length;e++)t[e].removeEventListener("click",(t=>{this.rslcontroller.audioClick(t)}));this.textBookWords.querySelectorAll(".fa-star-of-life").forEach((t=>{t.removeEventListener("click",(t=>{this.hardWordClick(t)}))})),this.textBookWords.querySelectorAll(".fa-thumbs-up").forEach((t=>{t.removeEventListener("click",(t=>{this.easyWordClick(t)}))}))}addWorsEvens(){const t=this.textBookWords.querySelectorAll(".fa-volume-up");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(t=>{this.rslcontroller.audioClick(t)}));this.textBookWords.querySelectorAll(".fa-star-of-life").forEach((t=>{t.addEventListener("click",(t=>{this.hardWordClick(t)}))})),this.textBookWords.querySelectorAll(".fa-thumbs-up").forEach((t=>{t.addEventListener("click",(t=>{this.easyWordClick(t)}))}))}async hardWordClick(t){const e=t.currentTarget,s=e.getAttribute("data-id");if(s){if(this.rslcontroller.isEasyWord(+s))return;e.classList.contains("off")?(e.classList.remove("off"),e.classList.add("on"),await this.rslcontroller.updateUserWord(+s,"hard")):(e.classList.remove("on"),e.classList.add("off"),await this.rslcontroller.updateUserWord(+s,"learn"))}}async easyWordClick(t){const e=t.currentTarget,s=e.getAttribute("data-id");if(s){if(this.rslcontroller.isHardWord(+s))return;e.classList.contains("off")?(e.classList.remove("off"),e.classList.add("on"),await this.rslcontroller.updateUserWord(+s,"easy")):(e.classList.remove("on"),e.classList.add("off"),await this.rslcontroller.updateUserWord(+s,"learn"))}}}(this),this.gamesView=new class{constructor(t){this.rslcontroller=t,this.games=document.querySelector(".games_page"),this.evInit=!1,this.evetsInit()}evetsInit(){this.evInit||(this.games.querySelector(".main_page_ref")?.addEventListener("click",(()=>{this.mainMenuClick()})),this.games.querySelector(".textbook_page_ref")?.addEventListener("click",(()=>{this.textBookClick()})),this.games.querySelector(".sprint")?.addEventListener("click",(()=>{this.sprintClick()})),this.games.querySelector(".audition")?.addEventListener("click",(()=>{this.auditionClick()})))}mainMenuClick(){this.games.style.display="none",this.rslcontroller.mainView.main.style.display="block"}textBookClick(){this.games.style.display="none",this.rslcontroller.textBookView.textBook.style.display="block"}sprintClick(){this.games.style.display="none",this.rslcontroller.sprintView.sprint.style.display="block",this.rslcontroller.sprintView.prepareWords()}auditionClick(){this.games.style.display="none",this.rslcontroller.auditionView.audition.style.display="block"}}(this),this.sprintView=new class{constructor(t){this.rslcontroller=t,this.words=[],this.wordIdx=-1,this.points=20,this.totalPoints=0,this.series=0,this.bestSeries=0,this.timeOut=60,this.question={idx:-1,word:"",translate:"",result:!0},this.audio=new Audio,this.audio.volume=.1,this.sprint=document.querySelector(".sprint_page"),this.modalBody=this.sprint.querySelector(".modal_body"),this.resultWindow=this.sprint.querySelector("#result_window"),this.stasticWindow=this.sprint.querySelector("#stastic_window"),this.wordElem=this.sprint.querySelector(".sprint_question_word"),this.translateElem=this.sprint.querySelector(".sprint_question_translate"),this.pointsElem=this.sprint.querySelector(".points"),this.totalPointsElem=this.sprint.querySelector(".total_points"),this.evInit=!1,this.evetsInit(),this.intervalId=null}evetsInit(){this.evInit||(this.sprint.querySelector(".wrong_button").addEventListener("click",(()=>{this.wrongBtnClick()})),this.sprint.querySelector(".correct_button").addEventListener("click",(()=>{this.correctBtnClick()})),this.sprint.querySelector(".exit_button").addEventListener("click",(()=>{this.exitBtnClick()})),this.resultWindow.querySelector(".statistic_button").addEventListener("click",(()=>{this.statisticBtnClick()})),this.resultWindow.querySelector(".next_button").addEventListener("click",(()=>{this.nextSprintBtnClick()})),this.resultWindow.querySelector(".games_button").addEventListener("click",(()=>{this.gamesBtnClick()})),this.stasticWindow.querySelector(".result_button").addEventListener("click",(()=>{this.resultBtnClick()})))}sprintInit(){this.wordIdx=-1,this.points=20,this.totalPoints=0,this.series=0,this.bestSeries=0,this.timeOut=60,this.question={idx:-1,word:"",translate:"",result:!0}}nextQuestion(){if(this.wordIdx++,this.wordIdx>=this.words.length&&(this.wordIdx=0),this.question.idx=this.wordIdx,this.question.word=this.words[this.question.idx].word,this.question.result=Math.floor(2*Math.random())>0,this.question.result)this.question.translate=this.words[this.question.idx].wordTranslate;else{let t=Math.floor(Math.random()*this.words.length);t===this.question.idx&&(t++,t>=this.words.length&&(t=0)),this.question.translate=this.words[t].wordTranslate}this.render()}render(){this.wordElem.textContent=this.question.word,this.translateElem.textContent=this.question.translate,this.pointsElem.textContent=`+${this.points}`,this.totalPointsElem.textContent=`${this.totalPoints}`,this.setStars()}setStars(){const t=this.sprint.querySelectorAll(".point_buster_bar i");for(let e=0;e<t.length;e++)e<=this.series?(t[e].classList.remove("star-inactive"),t[e].classList.add("star-active")):(t[e].classList.remove("star-active"),t[e].classList.add("star-inactive"))}setTime(){this.timeOut>=0?(this.sprint.querySelector(".timer_paragr").textContent=`${this.timeOut}`,this.timeOut--):this.resultSprint()}wrongBtnClick(){this.setAnsver(this.question.idx,!this.question.result),this.nextQuestion()}correctBtnClick(){this.setAnsver(this.question.idx,this.question.result),this.nextQuestion()}setAnsver(t,e){e?(this.words[t].correctCnt++,this.audio.src="./images/correct.mp3",this.audio.play(),this.series++,this.bestSeries<this.series&&(this.bestSeries=this.series),this.totalPoints+=this.points,this.series<4&&(this.points+=20)):(this.words[t].errorCnt++,this.audio.src="./images/error.mp3",this.audio.play(),this.series=0,this.points=20)}prepareWords(){this.sprintInit(),this.words.splice(0,this.words.length);const t=this.rslcontroller.rslModel.textBook;for(let e=0;e<this.rslcontroller.rslModel.textBook.length;e++){const s={id:t[e]._id,group:t[e].group,page:t[e].page,word:t[e].word,audio:t[e].audio,wordTranslate:t[e].wordTranslate,correctCnt:0,errorCnt:0,state:0};this.words.push(s)}this.nextQuestion(),this.intervalId=setInterval((()=>{this.setTime()}),1e3)}exitBtnClick(){this.resultSprint()}resultSprint(){this.intervalId&&clearInterval(this.intervalId),this.resultWindow.querySelector("h3").textContent=`Ваш результат ${this.totalPoints} очков`,this.resultWindow.querySelector("h4").textContent=`Длинна серии ${this.bestSeries}`,this.modalBody.style.visibility="visible",this.resultWindow.style.display="flex",this.stasticWindow.style.display="none"}statisticBtnClick(){this.stasticWindow.style.display="block",this.resultWindow.style.display="none",this.statisticRender()}nextSprintBtnClick(){this.modalBody.style.visibility="hidden",this.stasticWindow.style.display="none",this.resultWindow.style.display="none",this.prepareWords()}gamesBtnClick(){this.modalBody.style.visibility="hidden",this.stasticWindow.style.display="none",this.resultWindow.style.display="none",this.sprint.style.display="none",this.rslcontroller.gamesView.games.style.display="block"}resultBtnClick(){this.resultSprint()}statisticRender(){let t=this.stasticWindow.querySelectorAll("i");for(let e=0;e<t.length;e++)t[e].removeEventListener("click",(t=>{this.statisticAudioClick(t)}));this.stasticWindow.querySelector("h3").textContent=`Ваш результат ${this.totalPoints} очков`,this.stasticWindow.querySelector("h4").textContent=`Длинна серии ${this.bestSeries}`;const e=this.stasticWindow.querySelector(".statistic_table");e.innerHTML="";let s='<h5 class="mistakes_title">ошибок: </h5>';for(let t=0;t<this.words.length;t++)this.words[t].errorCnt>0&&(s+=this.statisticRowHTML(t));s+='<h5 class="answers_title">угадано: </h5>';for(let t=0;t<this.words.length;t++)this.words[t].correctCnt>0&&(s+=this.statisticRowHTML(t));e.innerHTML=s,t=this.stasticWindow.querySelectorAll("i");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(t=>{this.statisticAudioClick(t)}))}statisticRowHTML(t){return`<div class="statistic_table_row"><i class="fas fa-volume-up fas_statistic_table" data-id="${t}"></i><p>${this.words[t].word}</p><p> - </p><p>${this.words[t].wordTranslate}</p></div>`}statisticAudioClick(t){const e=t.currentTarget;if(!e)return;const s=e.getAttribute("data-id");s&&(this.audio.src=`${this.rslcontroller.rslModel.serverUrl}/${this.words[+s].audio}`,this.audio.play())}}(this),this.auditionView=new class{constructor(t){this.rslcontroller=t,this.audition=document.querySelector(".audition_page"),this.evInit=!1}}(this),window.addEventListener("beforeunload",(()=>this.setLocalStorage())),this.getLocalStorage()}getLocalStorage(){if(localStorage.getItem("rslang_user")){const t=localStorage.getItem("rslang_user");t&&(this.rslModel.user=JSON.parse(t),this.logInUser({email:this.rslModel.user.email,password:this.rslModel.user.password}),this.rslModel.user.id&&this.rslModel.user.token?this.mainView.loginBtn.textContent="выйти":this.mainView.loginBtn.textContent="войти",this.viewUserNameAll())}}viewUserNameAll(){const t=document.querySelectorAll(".user_name");let e="";this.rslModel.user.id&&this.rslModel.user.token&&(e=this.rslModel.user.name);for(let s=0;s<t.length;s++)t[s].textContent=e}setLocalStorage(){localStorage.setItem("rslang_user",JSON.stringify(this.rslModel.user))}async getWords(){if(await this.getUserWords(!0),0===this.rslModel.textBook.length){await this.rslModel.getTmpWords(this.rslModel.group,this.rslModel.page);const t=[];for(let e=0;e<this.rslModel.tmpWords.length;e++)t.push(this.rslModel.createUserWord(e,"learn"));await Promise.all(t),await this.getUserWords(!1),this.rslModel.tmpWords.splice(0,this.rslModel.tmpWords.length)}this.tbWordsView.render(this.rslModel.textBook)}async getUserWords(t){t&&this.rslModel.textBook.splice(0,this.rslModel.textBook.length);const e=`?wordsPerPage=20&filter={"$and":[{"userWord.difficulty":"learn", "group":${this.rslModel.group}, "page":${this.rslModel.page}}]}`;await this.rslModel.getUserAggregatedWords(e)}async hardWordsView(){this.rslModel.textBook.splice(0,this.rslModel.textBook.length),await this.rslModel.getUserAggregatedWords('?wordsPerPage=40&filter={"$and":[{"userWord.difficulty":"learn", "userWord.optional.state":"hard"}]}'),this.rslModel.group=6,this.tbWordsView.expLevelBtnActivate(this.rslModel.group),this.tbWordsView.render(this.rslModel.textBook)}async createUser(t){await this.rslModel.createUser(t)}async logInUser(t){await this.rslModel.logInUser(t)}setGroup(t){this.rslModel.group>=0&&this.rslModel.group<=5&&(this.rslModel.group=t)}nextWordsPage(){this.rslModel.page<29&&(this.rslModel.page++,this.rslModel.pages[this.rslModel.group]=this.rslModel.page,this.getWords())}prevWordsPage(){this.rslModel.page>0&&(this.rslModel.page--,this.rslModel.pages[this.rslModel.group]=this.rslModel.page,this.getWords())}setPage(t){this.rslModel.page>=0&&this.rslModel.page<=29&&(this.rslModel.page=t,this.rslModel.pages[this.rslModel.group]=this.rslModel.page)}audioClick(t){const e=t.currentTarget.getAttribute("data-id");e&&(this.rslModel.currWord=+e,this.rslModel.playAudio())}tbLevelClick(t){const e=t.currentTarget.getAttribute("data-id");e&&(this.rslModel.group=+e,this.rslModel.page=this.rslModel.pages[this.rslModel.group],this.tbWordsView.expLevelBtnActivate(this.rslModel.group),this.getWords())}async deleteUserWord(t,e){await this.rslModel.deleteUserWord(t),await this.getUserWords(e)}async createUserWord(t,e){await this.rslModel.createUserWord(t,e)}async updateUserWord(t,e){this.rslModel.textBook[t].userWord.optional.state=e,await this.rslModel.updateUserWord(t)}isHardWord(t){return"hard"===this.rslModel.textBook[t].userWord.optional.state}isEasyWord(t){return"easy"===this.rslModel.textBook[t].userWord.optional.state}}})();